import{M as F,j as C,i as A,u as S,P as K,a as U,b as W,L as T,m as B}from"./proxy.c8M_Ou33.js";import{r as s}from"./index.RH_Wq4ov.js";function v(e,o){if(typeof e=="function")return e(o);e!=null&&(e.current=o)}function D(...e){return o=>{let t=!1;const r=e.map(i=>{const n=v(i,o);return!t&&typeof n=="function"&&(t=!0),n});if(t)return()=>{for(let i=0;i<r.length;i++){const n=r[i];typeof n=="function"?n():v(e[i],null)}}}}function H(...e){return s.useCallback(D(...e),e)}class V extends s.Component{getSnapshotBeforeUpdate(o){const t=this.props.childRef.current;if(t&&o.isPresent&&!this.props.isPresent){const r=t.offsetParent,i=A(r)&&r.offsetWidth||0,n=this.props.sizeRef.current;n.height=t.offsetHeight||0,n.width=t.offsetWidth||0,n.top=t.offsetTop,n.left=t.offsetLeft,n.right=i-n.width-n.left}return null}componentDidUpdate(){}render(){return this.props.children}}function X({children:e,isPresent:o,anchorX:t,root:r}){const i=s.useId(),n=s.useRef(null),f=s.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:d}=s.useContext(F),g=H(n,e?.ref);return s.useInsertionEffect(()=>{const{width:a,height:R,top:c,left:p,right:h}=f.current;if(o||!n.current||!a||!R)return;const x=t==="left"?`left: ${p}`:`right: ${h}`;n.current.dataset.motionPopId=i;const u=document.createElement("style");d&&(u.nonce=d);const k=r??document.head;return k.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${R}px !important;
            ${x}px !important;
            top: ${c}px !important;
          }
        `),()=>{k.contains(u)&&k.removeChild(u)}},[o]),C.jsx(V,{isPresent:o,childRef:n,sizeRef:f,children:s.cloneElement(e,{ref:g})})}const Z=({children:e,initial:o,isPresent:t,onExitComplete:r,custom:i,presenceAffectsLayout:n,mode:f,anchorX:d,root:g})=>{const a=S(G),R=s.useId();let c=!0,p=s.useMemo(()=>(c=!1,{id:R,initial:o,isPresent:t,custom:i,onExitComplete:h=>{a.set(h,!0);for(const x of a.values())if(!x)return;r&&r()},register:h=>(a.set(h,!1),()=>a.delete(h))}),[t,a,r]);return n&&c&&(p={...p}),s.useMemo(()=>{a.forEach((h,x)=>a.set(x,!1))},[t]),s.useEffect(()=>{!t&&!a.size&&r&&r()},[t]),f==="popLayout"&&(e=C.jsx(X,{isPresent:t,anchorX:d,root:g,children:e})),C.jsx(K.Provider,{value:p,children:e})};function G(){return new Map}const P=e=>e.key||"";function M(e){const o=[];return s.Children.forEach(e,t=>{s.isValidElement(t)&&o.push(t)}),o}const N=({children:e,custom:o,initial:t=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:n="sync",propagate:f=!1,anchorX:d="left",root:g})=>{const[a,R]=U(f),c=s.useMemo(()=>M(e),[e]),p=f&&!a?[]:c.map(P),h=s.useRef(!0),x=s.useRef(c),u=S(()=>new Map),[k,L]=s.useState(c),[y,E]=s.useState(c);W(()=>{h.current=!1,x.current=c;for(let m=0;m<y.length;m++){const l=P(y[m]);p.includes(l)?u.delete(l):u.get(l)!==!0&&u.set(l,!1)}},[y,p.length,p.join("-")]);const b=[];if(c!==k){let m=[...c];for(let l=0;l<y.length;l++){const j=y[l],z=P(j);p.includes(z)||(m.splice(l,0,j),b.push(j))}return n==="wait"&&b.length&&(m=b),E(M(m)),L(c),null}const{forceRender:_}=s.useContext(T);return C.jsx(C.Fragment,{children:y.map(m=>{const l=P(m),j=f&&!a?!1:c===y||p.includes(l),z=()=>{if(u.has(l))u.set(l,!0);else return;let I=!0;u.forEach($=>{$||(I=!1)}),I&&(_?.(),E(x.current),f&&R?.(),r&&r())};return C.jsx(Z,{isPresent:j,initial:!h.current||t?void 0:!1,custom:o,presenceAffectsLayout:i,mode:n,root:g,onExitComplete:j?void 0:z,anchorX:d,children:m},l)})})},Q={src:"/_astro/cold_sun.D-zt68Le.jpg"},q={src:"/_astro/asia.BUZaLnIg.jpg"},J={src:"/_astro/modern.DVyVSKtX.jpg"},O={src:"/_astro/tower.CzIai6Lm.jpg"},Y={src:"/_astro/sunset.BoQvbnZh.jpg"},ee={src:"/_astro/asteroid.CSbokeKe.jpg"},te={src:"/_astro/snow.PxotHlzC.jpg"},w=[{author:"Photo by Laura Cleffmann on Unsplash",image:Q.src},{author:"Photo by Suzi Kim on Unsplash",image:q.src},{author:"topntp26 on Freepik",image:O.src},{author:"wirestock on Freepik",image:J.src},{author:"AI vecstock on Freepik",image:Y.src},{author:"AI Freepik on Freepik",image:ee.src},{author:"wirestock on Freepik",image:te.src}],ne={enter:e=>({x:e>0?1e3:-1e3,opacity:0}),center:{zIndex:0,x:0,opacity:1},exit:e=>({zIndex:0,x:e<0?1e3:-1e3,opacity:0})},re=()=>{const[[e,o],t]=s.useState([0,0]),r=d=>{t([e+d,d])},i=(d,g)=>{g.offset.x>100?r(-1):g.offset.x<-100&&r(1)},n=(e%w.length+w.length)%w.length||0,f=w[n];return C.jsx(N,{initial:!1,custom:o,children:C.jsx(B.div,{className:"absolute inset-0 -z-10 bg-center bg-no-repeat bg-fixed",style:{backgroundImage:`url(${f.image})`,backgroundSize:"auto 100%"},title:f.author,custom:o,variants:ne,initial:"enter",animate:"center",exit:"exit",transition:{x:{type:"spring",stiffness:300,damping:30},opacity:{duration:.2}},onPan:i},e)})};export{re as default};
